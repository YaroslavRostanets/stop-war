class NoWarUkraine {
    constructor(instance) {
        this.apiInstance = instance;
    }

    setModalContent(lang = 'en') {
        const linkStyles = "color:-webkit-link;cursor: pointer;text-decoration:none"
        switch (lang) {
            case 'ru':
                return `–†–æ—Å—Å–∏—è –Ω–∞—á–∞–ª–∞ –ø–æ–ª–Ω–æ–º–∞—Å—à—Ç–∞–±–Ω—É—é –≤–æ–π–Ω—É —Å –£–∫—Ä–∞–∏–Ω–æ–π. <br>
                –û–Ω–∏ —É–∂–µ –Ω–∞—á–∞–ª–∏ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–µ –Ω–∞ –£–∫—Ä–∞–∏–Ω—É, –≤—Å–µ –∫—Ä—É–ø–Ω—ã–µ –≥–æ—Ä–æ–¥–∞ –ø–æ–¥ –æ–±—Å—Ç—Ä–µ–ª–æ–º, —Å—Ç—Ä–∞–¥–∞–µ—Ç –º–∏—Ä–Ω–æ–µ –Ω–∞—Å–µ–ª–µ–Ω–∏–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–¥–µ—Ä–∂–∏—Ç–µ –£–∫—Ä–∞–∏–Ω—É!<br>
                ‚úÖ –ß–ï–ú –í–´ –ú–û–ñ–ï–¢–ï –ü–û–ú–û–ß–¨? –°–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ, —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ —Å–µ–π—á–∞—Å —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –£–∫—Ä–∞–∏–Ω—ã, —ç—Ç–æ –ü–†–û–ß–ò–¢–ê–¢–¨ –∏ –ü–û–î–ï–õ–ò–¢–¨–°–Ø –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –Ω–∞–ø–∞–¥–µ–Ω–∏–∏ –†–æ—Å—Å–∏–∏ –Ω–∞ –£–∫—Ä–∞–∏–Ω—É. <br>
                üîπ –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç –£–∫—Ä–∞–∏–Ω—ã <br>
                –ò–Ω—Ç–µ—Ä–Ω–µ—Ç: <a style=${linkStyles} href="https://www.president.gov.ua/en">https://www.president.gov.ua/en</a><br>
                –¢–≤–∏—Ç—Ç–µ—Ä: <a style=${linkStyles} href="https://twitter.com/ZelenskyyUa">https://twitter.com/ZelenskyyUa</a> <br>
                Facebook: <a style=${linkStyles} href="https://www.facebook.com/zelenskiy.official">https://www.facebook.com/zelenskiy.official</a> <br>
                üîπ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã –£–∫—Ä–∞–∏–Ω—ã –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö <br>
                Facebook: <a style=${linkStyles} href="https://www.facebook.com/UkraineUA.MFA">https://www.facebook.com/UkraineUA.MFA</a> <br>
                –ò–Ω—Å—Ç–∞–≥—Ä–∞–º: <a style=${linkStyles} href="https://www.instagram.com/ukraine.ua/">https://www.instagram.com/ukraine.ua/</a> <br>
                üîπ –ü–æ—Å–æ–ª—å—Å—Ç–≤–æ –£–∫—Ä–∞–∏–Ω—ã –≤ –≤–∞—à–µ–π —Å—Ç—Ä–∞–Ω–µ (–ò–Ω—Ç–µ—Ä–Ω–µ—Ç, Facebook –∏ Twitter) <br>
                ‚úÖ–ü–æ–º–æ–≥–∏—Ç–µ –∑–∞—â–∏—Ç–∏—Ç—å –£–∫—Ä–∞–∏–Ω—É ‚Äî –ø–æ–∂–µ—Ä—Ç–≤—É–π—Ç–µ –≤ –≥–ª–∞–≤–Ω—ã–π –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–æ–Ω–¥ –£–∫—Ä–∞–∏–Ω—ã ‚Äî <a style=${linkStyles} href="https://savelife.in.ua/ru/donate/">https://savelife.in.ua/ru/donate/</a> <br>
                ‚úÖ –ü–æ–º–æ–≥–∏—Ç–µ –∑–∞—â–∏—Ç–∏—Ç—å –£–∫—Ä–∞–∏–Ω—É ‚Äî –ø–æ–∂–µ—Ä—Ç–≤—É–π—Ç–µ –≤ —Ñ–æ–Ω–¥ –ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –±–∞–Ω–∫–∞ –£–∫—Ä–∞–∏–Ω—ã - <a style=${linkStyles} href="http://surl.li/blnsy">http://surl.li/blnsy</a> <br>
                
                ‚úÖ –ü–æ–º–æ–≥–∏—Ç–µ –£–∫—Ä–∞–∏–Ω–µ, —Ä–∞–∑–º–µ—Å—Ç–∏–≤ –Ω–∞ —Å–≤–æ–µ–º —Å–∞–π—Ç–µ —ç—Ç–æ—Ç –≤–∏–¥–∂–µ—Ç <br>
                <a style=${linkStyles} href="https://github.com/ukraine-not-war/stop-war">https://github.com/ukraine-not-war/stop-war</a> <br>
                
               –ë—É–¥—å —Å –£–∫—Ä–∞–∏–Ω–æ–π!`;
            case 'ua':
                return `–†–æ—Å—ñ—è —Ä–æ–∑–ø–æ—á–∞–ª–∞ –ø–æ–≤–Ω–æ–º–∞—Å—à—Ç–∞–±–Ω—É –≤—ñ–π–Ω—É –∑ –£–∫—Ä–∞—ó–Ω–æ—é. <br>
                –í–æ–Ω–∏ –≤–∂–µ –ø–æ—á–∞–ª–∏ –∞—Ç–∞–∫—É –Ω–∞ –£–∫—Ä–∞—ó–Ω—É, —É—Å—ñ –≤–µ–ª–∏–∫—ñ –º—ñ—Å—Ç–∞ –ø—ñ–¥ –æ–±—Å—Ç—Ä—ñ–ª–æ–º, —Å—Ç—Ä–∞–∂–¥–∞—é—Ç—å –º–∏—Ä–Ω—ñ –∂–∏—Ç–µ–ª—ñ. –ë—É–¥—å –ª–∞—Å–∫–∞, –±—É–¥—å—Ç–µ –∑ –£–∫—Ä–∞—ó–Ω–æ—é!<br>
                ‚úÖ –ß–ò–ú –í–ò –ú–û–ñ–ï–¢–ï –î–û–ü–û–ú–û–ì–¢–ò? –ù–∞–π–≤–∞–∂–ª–∏–≤—ñ—à–µ, —â–æ –≤–∏ –º–æ–∂–µ—Ç–µ –∑—Ä–æ–±–∏—Ç–∏ –¥–ª—è –£–∫—Ä–∞—ó–Ω–∏ –∑–∞—Ä–∞–∑, ‚Äî —Ü–µ –ß–ò–¢–ê–¢–ò —Ç–∞ –î–Ü–õ–ò–¢–ò–°–Ø –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ –Ω–∞–ø–∞–¥ –†–æ—Å—ñ—ó –Ω–∞ –£–∫—Ä–∞—ó–Ω—É. <br>
                üîπ –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç –£–∫—Ä–∞—ó–Ω–∏ <br>
                –í–µ–±-—Å–∞–π—Ç: <a style=${linkStyles} href="https://www.president.gov.ua/en">https://www.president.gov.ua/uk</a><br>
                Twitter: <a style=${linkStyles} href="https://twitter.com/ZelenskyyUa">https://twitter.com/ZelenskyyUa</a> <br>
                Facebook: <a style=${linkStyles} href="https://www.facebook.com/zelenskiy.official">https://www.facebook.com/zelenskiy.official</a> <br>
                üîπ –û—Ñ—ñ—Ü—ñ–π–Ω—ñ –∞–∫–∞—É–Ω—Ç–∏ –£–∫—Ä–∞—ó–Ω–∏ –≤ —Å–æ—Ü—ñ–∞–ª—å–Ω–∏—Ö –º–µ—Ä–µ–∂–∞—Ö <br>
                Facebook: <a style=${linkStyles} href="https://www.facebook.com/UkraineUA.MFA">https://www.facebook.com/UkraineUA.MFA</a> <br>
                Instagram: <a style=${linkStyles} href="https://www.instagram.com/ukraine.ua/">https://www.instagram.com/ukraine.ua/</a> <br>
                üîπ –ü–æ—Å–æ–ª—å—Å—Ç–≤–æ –£–∫—Ä–∞—ó–Ω–∏ —É –≤–∞—à—ñ–π –∫—Ä–∞—ó–Ω—ñ (Web, Facebook —Ç–∞ Twitter) <br>
                ‚úÖ–î–æ–ø–æ–º–æ–∂—ñ—Ç—å –∑–∞—Ö–∏—Å—Ç–∏—Ç–∏ –£–∫—Ä–∞—ó–Ω—É ‚Äî –Ω–∞–¥—ñ—à–ª—ñ—Ç—å –∫–æ—à—Ç–∏ –¥–æ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –±–ª–∞–≥–æ–¥—ñ–π–Ω–æ–≥–æ —Ñ–æ–Ω–¥—É –£–∫—Ä–∞—ó–Ω–∏ ‚Äî <a style=${linkStyles} href="https://savelife.in.ua/ua/donate/">https://savelife.in.ua/ua/–ø–æ–∂–µ—Ä—Ç–≤—É–≤–∞—Ç–∏/</a> <br>
                ‚úÖ –î–æ–ø–æ–º–æ–∂—ñ—Ç—å –∑–∞—Ö–∏—Å—Ç–∏—Ç–∏ –£–∫—Ä–∞—ó–Ω—É ‚Äî –Ω–∞–¥—ñ—à–ª—ñ—Ç—å –∫–æ—à—Ç–∏ –¥–æ —Ñ–æ–Ω–¥—É –ù–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ –±–∞–Ω–∫—É –£–∫—Ä–∞—ó–Ω–∏ - <a style=${linkStyles} href="http://surl.li/blnsy">http://surl.li/blnsy</a><br>
                ‚úÖ –î–æ–ø–æ–º–æ–∂—ñ—Ç—å –£–∫—Ä–∞—ó–Ω—ñ, —Ä–æ–∑–º—ñ—Å—Ç–∏–≤—à–∏ –Ω–∞ —Å–≤–æ—î–º—É —Å–∞–π—Ç—ñ —Ü–µ–π –≤—ñ–¥–∂–µ—Ç <br>
                <a style=${linkStyles} href="https://github.com/ukraine-not-war/stop-war">https://github.com/ukraine-not-war/stop-war</a > <br>
                –ë—É–¥—å—Ç–µ –∑ –£–∫—Ä–∞—ó–Ω–æ—é!`;
            default:
                return `Russia has started a full-scale war with Ukraine. <br>
                They have already began their attack on Ukraine, all major cities are under fire, civilians are suffering. Please, Stand with Ukraine!<br>
                ‚úÖ HOW CAN YOU HELP? The most important thing you can do for Ukraine now is to READ and SHARE verified information about Russia‚Äôs attack on Ukraine. <br>
                üîπ President of Ukraine <br>
                Web: <a style=${linkStyles} href="https://www.president.gov.ua/en">https://www.president.gov.ua/en</a><br>
                Twitter: <a style=${linkStyles} href="https://twitter.com/ZelenskyyUa">https://twitter.com/ZelenskyyUa</a>  <br>
                Facebook: <a style=${linkStyles} href="https://www.facebook.com/zelenskiy.official">https://www.facebook.com/zelenskiy.official</a>  <br>
                üîπ Ukraine‚Äôs official social media accounts <br>
                Facebook: <a style=${linkStyles} href="https://www.facebook.com/UkraineUA.MFA">https://www.facebook.com/UkraineUA.MFA</a>  <br>
                Instagram: <a style=${linkStyles} href="https://www.instagram.com/ukraine.ua/">https://www.instagram.com/ukraine.ua/</a> <br>
                
                üîπ Embassy of Ukraine in your country (Web, Facebook & Twitter) <br>
                ‚úÖ Help to defend Ukraine ‚Äî donate to Ukraine‚Äôs main charity fund ‚Äî <a style=${linkStyles} href="https://savelife.in.ua/en/donate/">https://savelife.in.ua/en/donate/</a> <br>
                
                ‚úÖ Help to defend Ukraine ‚Äî donate to the fund of the National Bank of Ukraine <a style=${linkStyles} href="http://surl.li/blnsy">http://surl.li/blnsy</a> <br>
                ‚úÖ Help Ukraine by placing this widget on your website <br>
                <a style=${linkStyles} href="https://github.com/ukraine-not-war/stop-war">https://github.com/ukraine-not-war/stop-war</a > <br>
                Stand With Ukraine!`;
        }
    }

    init(lang='en') {
        const button = document.createElement('img');
        const modal = document.createElement('div');
        const id = 'no-war-ukraine' + Date.now();
        button.setAttribute('id', 'button-' + id);
        button.setAttribute('src', 'https://ukraine-not-war.github.io/stop-war/images/stop_war.svg');
        modal.setAttribute('id', 'modal-' + id);
        document.body.prepend(button);
        document.body.prepend(modal);
        button.style.cssText = 'position:fixed;top:100px;right:-12px;z-index:1000;width:100px;height:80px';
        // button.innerHTML = `<div>Nest</div>`;
        modal.style.cssText = 'display: none;position: fixed;z-index: 1001;padding-top: 100px;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0,0,0);background-color: rgba(0,0,0,0.7)';
        modal.innerHTML = ` 
         <!-- Modal content -->
          <p style="background-color: #fefefe;
          margin: auto;
          border-radius:10px;
          padding: 20px;
          border: 1px solid #888;
          width: 80%;
          font-size: 14px;
          max-width: 600px;
          word-break: break-word;
          max-height: 90%;
          font-family:Garamond, Sans-serif;">
            <span id="close-modal-${id}" style="color: #aaaaaa;
          float: right;
          font-size: 28px;
          font-weight: bold;">&times;</span>
        ${this.setModalContent(lang)}
          </p>`;
        button.addEventListener('click', function () {
            modal.querySelector("#close-modal-" + id).addEventListener('click', _ => modal.style.display = "none");
            modal.style.display = "block";
            window.onclick = function (event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        })
    }
}

/**
 * –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å Api
 */
class Api {
    init(lang='en') {
        const widget = new NoWarUkraine(this);
        widget.init(lang);
        return widget;
    }

    /**
     * –ó–∞–ø—É—Å–∫ –∫–æ–ª–±–µ–∫–æ–≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
     */
    runInitCallbacks() {
        let myCompanyApiInitCallbacks = window.myCompanyApiInitCallbacks;
        if (myCompanyApiInitCallbacks && myCompanyApiInitCallbacks.length) {
            setTimeout(function () {
                let callback;
                while (callback = myCompanyApiInitCallbacks.shift()) {
                    try {
                        callback();
                    } catch (e) {
                        console.error(e);
                    }
                }
            }, 0);
        }
    }
}

/**
 * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Api
 */
if (typeof (window)['myCompanyApi'] === 'undefined') {
    (window).myCompanyApi = new Api();
    (window).myCompanyApi.runInitCallbacks();
}
